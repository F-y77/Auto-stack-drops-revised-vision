# 自动堆叠掉落物 Auto Stack Items

## 功能

自动将地面上的同类物品堆叠在一起，有效减少地面杂物，提高游戏性能和整洁度。

对所有玩家周围的物品都进行堆叠，适用于多人游戏。

代码优化，性能稳定。

## 自定义选项

### 基础设置

- **堆叠间隔**：设置多久执行一次堆叠操作（立即到120秒）
- **堆叠范围**：设置检查多大范围内的物品进行堆叠（3格到100格）
- **启动延迟**：设置游戏开始后多久开始第一次堆叠（5秒到60秒）

### 堆叠模式

- **堆叠模式**：选择堆叠哪些物品
  - 堆叠所有物品
  - 仅堆叠基础资源
  - 基础资源+冬季盛宴物品

- **堆叠顺序**：选择堆叠策略
  - 多到少：优先堆叠到数量最多的物品
  - 少到多：优先堆叠到数量最少的物品
  - 平均分配：尝试平均分配物品数量
  - 老到新：优先将旧物品堆叠到新物品上
  - 新到老：优先将新物品堆叠到旧物品上

- **延迟堆叠**：物品逐个堆叠，确保特殊效果能正确触发

### 音效设置

- **启用堆叠音效**：堆叠时播放音效（默认关闭）
  - 音效类型：啵、叮、嗖、咔

### 特殊设置

- **允许小型生物堆叠**：是否允许小型生物（如萤火虫等）进行堆叠
- **排除陷阱**：是否排除陷阱类物品的堆叠
- **保护稀有物品**：保护稀有物品不被堆叠（巨鹿眼球、熊皮、龙蝇皮、齿轮等）

### 不稳定功能（实验性功能，默认关闭）

- **启用磁铁效果**：物品会自动向堆叠目标移动（视觉效果）
  - 磁铁速度：慢速、正常、快速
- **显示堆叠范围**：在玩家周围显示堆叠范围光圈
- **启用连击系统**：连续堆叠会显示连击数（"X连击！"）
- **启用堆叠排行榜**：定期播报堆叠排行榜前3名
  - 播报间隔：5/10/15/30分钟
- **启用堆叠祝福**：堆叠时有概率获得临时增益
  - 祝福概率：低（5%）、中（10%）、高（20%）
  - 显示祝福消息：是否显示获得祝福的消息
  - 消息风格：详细（显示具体数值和时间）、简洁（只显示类型）
  - 祝福强度：弱（10%）、正常（20%）、强（30%）、很强（50%）
  - 祝福持续时间：5/10/15/20/30秒
  - 祝福类型：
    - 全部：速度、攻击、防御
    - 仅速度：只获得速度提升
    - 仅战斗：只获得攻击或防御提升
    - 速度+攻击：只获得速度或攻击提升
    - 速度+防御：只获得速度或防御提升
- **启用堆叠烟花**：达到成就里程碑时放烟花庆祝
- **启用堆叠预告**：每30秒显示附近可堆叠物品数量
- **启用堆叠表情**：堆叠时玩家有概率做表情动作
- **启用自动拾取**：堆叠后自动将物品放入背包
  - 拾取阈值：5/10/20/40个
  - 拾取模式：
    - 拾取所有物品：自动拾取所有堆叠物品
    - 仅拾取稀有物品：只拾取稀有物品（巨鹿眼球、熊皮、龙鳞、齿轮等）
    - 仅拾取基础资源：只拾取基础资源（木头、石头、草、树枝等）
- **启用堆叠统计**：播报每次堆叠的物品数量（"[统计] 本次堆叠了X个物品！"）
- **启用堆叠成就**：记录堆叠次数并在达到里程碑时播报
  - 成就里程碑：10次、50次、100次、500次、1000次、5000次、10000次
- **启用狂暴模式**：连续堆叠进入狂暴状态
  - 狂暴阈值：5/10/15/20次连击
  - 效果：攻击+50%，速度+30%，持续10秒
- **启用堆叠治疗**：堆叠时恢复生命/饥饿/理智
  - 治疗类型：生命、饥饿、理智、随机
  - 治疗量：1/2/5/10点
- **启用堆叠护盾**：堆叠时获得临时护盾
  - 护盾值：10/20/50/100点
  - 护盾可以吸收伤害，破碎后消失
- **启用堆叠光环**：堆叠时给附近队友加buff
  - 光环范围：5/10/15格
  - 效果：队友速度+15%，持续5秒
- **启用堆叠幸运**：堆叠后提升掉落品质
  - 幸运持续时间：30/60/120秒
  - 效果：提升掉落品质（实验性）
- **启用堆叠上限修改**：修改物品的最大堆叠数量（模组联动）
  - 堆叠上限：99/199/499/999
  - 效果：所有可堆叠物品的上限都会被修改
- **启用堆叠传送**：堆叠大量物品时传送到玩家身边
  - 传送阈值：50/100/200个
  - 效果：达到阈值时物品自动传送到玩家附近
- **启用堆叠经验**：堆叠时获得经验值（需要等级模组）
  - 经验值：1/5/10/20点
  - 效果：与等级模组联动，获得经验值
- **启用堆叠修复**：堆叠时修复装备耐久度
  - 修复量：1%/2%/5%/10%
  - 效果：自动修复身上装备的耐久度
- **启用堆叠温度调节**：堆叠时调节玩家温度
  - 温度效果：降温、升温、恒温
  - 效果：帮助玩家维持舒适温度
- **启用堆叠光源**：堆叠时在玩家周围产生光源
  - 光源持续时间：10/30/60秒
  - 效果：照亮周围环境
- **启用堆叠防潮**：堆叠时降低玩家潮湿度
  - 效果：每次堆叠降低5点潮湿度
- **启用堆叠施肥**：堆叠时自动给附近农作物施肥
  - 效果：自动促进10格范围内植物生长

## 注意事项

- 理论上所有可堆叠的物品都能进行堆叠
- 没进行过别的模组的兼容测试，装备武器堆叠还有999物品堆叠可能会崩溃
- 如果堆叠瞬间卡死，请自定义调少堆叠速度和范围
- 不稳定功能可能会影响性能，建议根据实际情况开启
- 堆叠上限修改功能可能与其他堆叠模组冲突，请谨慎使用
- 堆叠经验功能需要配合等级模组使用，否则不会生效
- 部分联动功能为实验性功能，可能在某些情况下不稳定

## 版本信息

- 版本：2.2.9
- 作者：橙小幸
- Q群：1042944194 欢迎饥荒联机交流

感谢您的大力支持！
